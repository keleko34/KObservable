<!DOCTYPE html>
<html>
  <head>
    <title>Testing</title>
    <link rel="stylesheet" href="css/mocha.css" />
    <script type="text/javascript" src="requirejs"></script>
    <script type="text/javascript" src="mocha"></script>
  </head>
  <body>
    <div class="Button_list"></div>
    <div id="mocha"><p><a href=".">Index</a></p></div>
    <div id="messages"></div>
    <div id="fixtures"></div>
    <script type="text/javascript">
      mocha.setup('bdd');
      require(['KonnektDT','chai','./test'],function(CreateKonnektDT,chai,test){
        test(CreateKonnektDT(),mocha,chai);
        
        /* test parsing */
        var json = '{"todo":{"something":" cool like that {}:,[{}], ","today":500},"why":["cool",300,{}]}'
        
        var mixed = CreateKonnektDT();
        
        /* now test speed */
        
        console.profile('custom');
        
        var t = mixed({},'coolio');
        
        for(var x=0,len=10000;x<len;x++)
        {
          t.parse(json);
        }
        
        console.profileEnd('custom');
        
        console.profile('builtin');
        
        for(var x=0,len=10000;x<len;x++)
        {
          var s = mixed(JSON.parse(json),'somethingelse');
        }
        
        console.profileEnd('builtin');
        
        console.log(t);
      });
    </script>
  </body>
</html>
